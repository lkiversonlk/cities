<!DOCTYPE html>
<html lang="en"  >

<!-- BEGIN HEAD -->
<head>
	<meta charset="utf-8"/>
	<title>CitiesToken | Own a Geocode Token of the Big Cities</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<meta content="" name="description"/>
	<meta content="" name="author"/>
		<!-- BEGIN GLOBAL MANDATORY STYLES -->

	<link href="../assets/plugins/socicon/socicon.css" rel="stylesheet" type="text/css"/>
	<link href="../assets/plugins/bootstrap-social/bootstrap-social.css" rel="stylesheet" type="text/css"/>		
	<link href="../assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
	<link href="../assets/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
	<link href="../assets/plugins/animate/animate.min.css" rel="stylesheet" type="text/css"/>
	<link href="../assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
	<!-- END GLOBAL MANDATORY STYLES -->

			<!-- BEGIN: BASE PLUGINS  -->
			<link href="../assets/plugins/cubeportfolio/css/cubeportfolio.min.css" rel="stylesheet" type="text/css"/>
			<link href="../assets/plugins/owl-carousel/assets/owl.carousel.css" rel="stylesheet" type="text/css"/>
			<link href="../assets/plugins/fancybox/jquery.fancybox.css" rel="stylesheet" type="text/css"/>
			<link href="../assets/plugins/slider-for-bootstrap/css/slider.css" rel="stylesheet" type="text/css"/>
				<!-- END: BASE PLUGINS -->
	
	
    <!-- BEGIN THEME STYLES -->
	<link href="../assets/demos/default/css/plugins.css" rel="stylesheet" type="text/css"/>
	<link href="../assets/demos/default/css/components.css" id="style_components" rel="stylesheet" type="text/css"/>
	<link href="../assets/demos/default/css/themes/default.css" rel="stylesheet" id="style_theme" type="text/css"/>
	<link href="../assets/demos/default/css/custom.css" rel="stylesheet" type="text/css"/>
	<!-- END THEME STYLES -->

	<link rel="shortcut icon" href="favicon.ico"/>
</head><body class="c-layout-header-fixed c-layout-header-mobile-fixed">
		<div class="modal fade c-content-login-form" id="login-form" role="dialog">
				<div class="modal-dialog">
						<div class="modal-content c-square">
								<div class="modal-header c-no-border">
										<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								</div>
								<div class="modal-body">
										<h3 class="c-font-24 c-font-sbold">You need MetaMask to Login!</h3>
										<p>Get the MetaMask Chrome extension</p>
										<form>
												<div class="form-group" align="center">
			<img src="../assets/img/metamask-logo.jpg" width="210">
												</div>
												<div class="clearfix">
														<div class="c-content-divider c-divider-sm c-icon-bg c-bg-grey c-margin-b-20">
																<span><a href="https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn" target="_blank" class="btn btn-md c-btn-yellow c-btn-circle">Get Metamask</a></span>
														</div>
												</div>
										</form>
								</div>
								<div class="modal-footer c-no-border">                
										<a href="javascript:;" data-toggle="modal" data-target="#locked-form" data-dismiss="modal" class="btn c-btn-dark-1 btn c-btn-uppercase c-btn-bold c-btn-slim c-btn-border-2x c-btn-square c-btn-signup">Locked</a>
										<a href="javascript:;" data-toggle="modal" data-target="#browser-form" data-dismiss="modal" class="btn c-btn-dark-1 btn c-btn-uppercase c-btn-bold c-btn-slim c-btn-border-2x c-btn-square c-btn-signup">Browser</a>
								</div>
						</div>
				</div>
			</div><!-- END: CONTENT/USER/LOGIN-FORM -->
			<!-- BEGIN: CONTENT/USER/LOCKED-FORM -->
			<div class="modal fade c-content-login-form" id="locked-form" role="dialog">
				<div class="modal-dialog">
						<div class="modal-content c-square">
								<div class="modal-header c-no-border">
										<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								</div>
								<div class="modal-body">
										<h3 class="c-font-24 c-font-sbold">MetaMask is locked!</h3>
										<p>Unlock it in your browser toolbar<img src="../assets/img/metamask-plug-icon.jpg" height="20"></p>
										<form>
												<div class="form-group" align="center">
			<img src="../assets/img/metamask-logo-gray.jpg" width="210">
												</div>
										</form>
								</div>
								<div class="modal-footer c-no-border">                
								</div>
						</div>
				</div>
			</div><!-- END: CONTENT/USER/LOCKED-FORM -->
			<!-- BEGIN: CONTENT/USER/BROWSER-FORM -->
			<div class="modal fade c-content-login-form" id="browser-form" role="dialog">
				<div class="modal-dialog">
						<div class="modal-content c-square">
								<div class="modal-header c-no-border">
										<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								</div>
								<div class="modal-body">
										<h3 class="c-font-24 c-font-sbold">Need Chrome browser...</h3>
										<p>Change it or Download Chrome browser</p>
										<form>
												<div class="form-group" align="center">
			<img src="../assets/img/chrome-logo.jpg" width="210">
												</div>
												<div class="clearfix">
														<div class="c-content-divider c-divider-sm c-icon-bg c-bg-grey c-margin-b-20">
																<span><a href="https://chrome.google.com" target="_blank" class="btn btn-md c-btn-yellow c-btn-circle">Download Chrome</a></span>
														</div>
												</div>
										</form>
								</div>
								<div class="modal-footer c-no-border">                
								</div>
						</div>
				</div>
			</div>
			
	<script src="../assets/plugins/jquery.min.js" type="text/javascript" ></script>
	<script src="../assets/plugins/jquery-migrate.min.js" type="text/javascript" ></script>
	<script src="../assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript" ></script>
	<script src="../assets/plugins/jquery.easing.min.js" type="text/javascript" ></script>
  <script src="../assets/plugins/js-cookie/js.cookie.js" type="text/javascript"></script>
	<script src="../assets/base/js/ethereum.js" type="text/javascript"></script>
	<script src="../assets/base/js/renderDetail.js"></script>

	<div class="container">
		{{#each tokens}}
			<div e-id="{{{G2Id lat lon lv}}}" name="node">
				{{{G2Id lat lon lv}}}
			</div>
		{{/each}}

		<button id="gen">Generate</button>
	</div>

	<script>
		let ids = [];
		$('[name="node"]').each((i, ele) => {
			let id = ele.getAttribute('e-id')
			ether.stage(id)
			.then(stage => {
				if(stage == 'Unsold') {
					ids.push(id)
					$("#gen").text(`Generate ${ids.length}`)
				}
			})
		})

		$("#gen").click(() => {
			ether.getContractIns
			.then(ins => {
				let batchSize = 4
				for(let i = 0; (i + 1) *batchSize < ids.length; i ++){
					let _ids = ids.slice(i, i + batchSize)
					ins.produce_batch(
						_ids, 
						"20000000000000000", 
						"10000000000000000",
						(err, tx) => {
							if(err) {
								alert(err)
							} else {
								console.log(tx)
							}
						}
					)
				}
				
			})
		})
	</script>
</body>
</html>
